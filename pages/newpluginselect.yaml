description: Provides the ability to select a plugin and an optional API to bind it to for configuration.
$type: DataEditPage
props:
  title: New Plugin
  mapper:
    $mapper: |
      (()=>{
        const {
          plugins,
          apis
        } = props;
        if(Array.isArray(plugins) && Array.isArray(apis)){
          return Object.assign({}, props, {
            schema: {
              fields: {
                api: {
                  type: 'string',
                  enum: ['[global]', ...apis.map(api=>api.name)],
                  default: '[global]'
                },
                pluginType: {
                  type: 'string',
                  enum: plugins,
                  required: true
                }
              }
            }
          });
        }
        return props;
      })();
  source:
    apis:
      url: /api/kong/apis
      root: data
    plugins:
      url: /api/kong/plugins/enabled
      root: enabled_plugins
  Editor:
    $component: KongForm
  successUrl:
    $mapper: |
      props.api!=='[global]'?`/kong/api/${props.api}/plugin/${props.pluginType}`:`/kong/plugin/${props.pluginType}`
path: /kong/plugin
