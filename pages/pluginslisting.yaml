description: Provides a listing of all configured plugins.
$type: div
children:
  $type: HeaderPage
  props:
    title: Plugins
  children:
    $type: Panel
    props:
      footer:
        $type: Link
        props:
          caption: New
          className: btn btn-primary
          to:
            $map: '`/kong/plugin`'
    children:
      $type: Provider
      props:
        mapper:
          $mapper: |
            (()=>{
              const {
                apis,
                data
              } = props || {};
              if(Array.isArray(apis) && Array.isArray(data)){
                const newData = data.map((row)=>{
                  if(row.api_id){
                    const api = apis.find((api)=>api.id === row.api_id);
                    if(api){
                      return Object.assign({api: api.name||row.api_id}, row);
                    }
                  }
                  return row;
                });
                return Object.assign({}, props, {data: newData});
              }
              return props;
            })();
        provide:
          apis:
            url: /api/kong/apis
            root: data
          data:
            url: /api/kong/plugins
            root: data
        Component:
          $component: ActionTable
        props:
          mapper:
            $mapper:
              Name: props.name
              API: props.api
              Created At: new Date(props.created_at)
          actions:
            - caption: Edit
              link: /kong/plugin/${name}/${id}
              btnStyle: primary
            - caption: Delete
              delete: /api/kong/plugins/${id}
              message: 'Are you sure you want to delete "${name}"?'
            - caption: ${enabled?'Disable':'Enable'}
              btnStyle: ${enabled?'danger':'success'}
              title: Disable ${name}
              message: ${enabled?(typeof(api)!=='undefined'?'Are you sure you want to disable plugin "'+name+'" for "'+api+'"?':'Are you sure you want to disable plugin "'+name+'" globally?'):''}
              fetch:
                url: /api/kong/plugins/${id}
                method: patch
                payload:
                  enabled: ${!enabled}
icon: Plugin
sideNav: true
caption: Plugins
path: /kong/plugins
