name: Kong
description: >
  This pack provides screens that allow users to manage a Kong API Gateway
  instance.


  **Required Endpoints:**


  /api/kong should point to the admin port of the Kong instance (EG:
  http://kong:8001)
pages:
  KongDashboard:
    description: Provides a basic dashboard view of the associated Kong API Gateway.
    $type: div
    children:
      $type: Page
      children:
        - $type: PageHeader
          props:
            title: Kong Overview
        - $type: Row
          children:
            - $type: Panel
              props:
                title: Connections Status
                inset: true
                md: 6
                sm: 12
              children:
                $type: Provider
                props:
                  provide:
                    data:
                      url: /api/kong/status
                      mapper:
                        $mapper: 'props.server?[props.server]:null'
                      refresh: 5000
                  Component:
                    $component: BarChart
                  props:
                    bars:
                      - connections_active
                      - connections_waiting
                      - connections_reading
                      - connections_writing
            - $type: Panel
              props:
                title: Connections Overview
                inset: true
                md: 3
                sm: 12
              children:
                $type: Provider
                props:
                  provide:
                    data:
                      url: /api/kong/status
                      mapper:
                        $mapper: 'props.server?[props.server]:null'
                      refresh: 5000
                  Component:
                    $component: BarChart
                  props:
                    bars:
                      - connections_handled
                      - connections_accepted
            - $type: Panel
              props:
                title: Timers
                inset: true
                md: 3
                sm: 12
              children:
                $type: Provider
                props:
                  provide:
                    data:
                      url: /api/kong
                      mapper:
                        $mapper: 'props.timers?[props.timers]:null'
                      refresh: 5000
                  Component:
                    $component: BarChart
                  props:
                    bars:
                      - running
                      - pending
    path: /kong/
    icon: Dashboard
    sideNav: true
    caption: Kong Dashboard
    isDashboard: true
  PluginsListing:
    description: Provides a listing of all configured plugins.
    $type: div
    children:
      $type: HeaderPage
      props:
        title: Plugins
      children:
        $type: Panel
        props:
          footer:
            $type: Link
            props:
              caption: New
              className: btn btn-primary
              to:
                $map: '`/kong/plugin`'
        children:
          $type: Provider
          props:
            provide:
              apis:
                url: /api/kong/apis
                root: data
              data:
                url: /api/kong/plugins
                root: data
            Component:
              $component: ActionTable
            props:
              mapper:
                $mapper:
                  Name: props.name
                  API: props.api
                  Created At: new Date(props.created_at)
                  Enabled: props.enabled
              actions:
                - caption: Edit
                  link:
                    $mapper: '`/kong/plugin/${props.name}/${props.id}`'
                  btnStyle: primary
                - caption: Delete
                  delete:
                    $mapper: '`/api/kong/plugins/${props.id}`'
                  message: 'Are you sure you want to delete "${name}"?'
    icon: Plugin
    sideNav: true
    caption: Plugins
    path: /kong/plugins
  NewPluginSelect:
    description: >-
      Provides the ability to select a plugin and an optional API to bind it to
      for configuration.
    $type: div
    children:
      $type: HeaderPage
      props:
        title: New Plugin
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                apis:
                  url: /api/kong/apis
                  root: data
                plugins:
                  url: /api/kong/plugins/enabled
                  root: enabled_plugins
              Component:
                $component: KongForm
              props:
                successUrl:
                  $mapper: >-
                    props.api!=='[global]'?`/kong/api/${props.api}/plugin/${props.pluginType}`:`/kong/plugin/${props.pluginType}`
    path: /kong/plugin
  EditPlugin:
    description: >-
      Provides the ability to create or edit an existing configured plugin for
      either an endpoint or globally.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: '`${params.pluginName} Settings`'
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: 'params.id?`/api/kong/plugins/${params.id}`:'''''
                schema:
                  url:
                    $map: '`/api/kong/plugins/schema/${params.pluginName}`'
              props:
                dataRoot: config
                successUrl:
                  $map: '`/kong/plugins`'
                submitTo:
                  method:
                    $map: 'params.id?"PUT":"POST"'
                  url:
                    $map: '`/api/kong/plugins`'
                mapper:
                  $mapper:
                    name: params.pluginName
                    config: props
              Component:
                $component: KongForm
    paths:
      - '/kong/plugin/:pluginName/:id'
      - '/kong/plugin/:pluginName'
  Cluster:
    description: Provides an overview of the current cluster.
    $type: HeaderPage
    props:
      title: Kong Cluster
    children:
      $type: Panel
      children:
        $type: Provider
        props:
          provide:
            data:
              url: /api/kong/cluster
              root: data
          Component:
            $component: Table
    path: /kong/cluster
    icon: Cluster
    sideNav: true
    caption: Cluster
  APIs:
    description: Provides a listing of configured API's.
    $type: div
    children:
      $type: HeaderPage
      props:
        title: APIs
      children:
        - $type: Panel
          props:
            footer:
              $type: Link
              props:
                caption: New
                className: btn btn-primary
                to: /kong/api
          children:
            $type: Provider
            props:
              provide:
                data:
                  url: /api/kong/apis
                  root: data
              Component:
                $component: ActionTable
              props:
                mapper:
                  $mapper:
                    Name: props.name
                    Host's: '(props.hosts || []).join(",")'
                    Upstream URL: props.upstream_url
                    URI's: '(props.uris || []).join(",")'
                actions:
                  - caption: Settings
                    btnStyle: primary
                    link: '/kong/api/${name}'
                  - caption: Plugins
                    link: '/kong/api/${name}/plugins'
                  - caption: Delete
                    delete: '/api/kong/apis/${name}'
                    message: 'Are you sure you want to delete "${name}"?'
    path: /kong/apis
    icon: API
    sideNav: true
    caption: APIs
  APIPlugins:
    description: Provides a manageable listing of plugins configured on an API.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: '`${params.name} Plugin''s`'
      children:
        $type: Panel
        props:
          footer:
            $type: Link
            props:
              caption: New
              className: btn btn-primary
              to:
                $map: '`/kong/api/${params.name}/plugin`'
        children:
          $type: Provider
          props:
            provide:
              data:
                url:
                  $map: '`/api/kong/apis/${params.name}/plugins`'
                root: data
            Component:
              $component: ActionTable
            props:
              mapper:
                $mapper:
                  Name: props.name
                  Created At: new Date(props.created_at)
                  Enabled: props.enabled
              actions:
                - caption: Edit
                  link:
                    $mapper: >-
                      `/kong/api/${params.name}/plugin/${props.name}/${props.id}`
                  btnStyle: primary
                - caption: Delete
                  delete:
                    $mapper: '`/api/kong/apis/${params.name}/plugins/${props.id}`'
                  message: 'Are you sure you want to delete "${name}"?'
    path: '/kong/api/:name/plugins'
  APISettings:
    description: Provides the ability to edit the settings for a configured API.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: '`${params.name} Settings`'
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: 'params.name?`/api/kong/apis/${params.name}`:'''''
              props:
                schema:
                  fields:
                    name:
                      type: string
                      default: ''
                      required: true
                    hosts:
                      type: array
                    uris:
                      type: array
                    methods:
                      type: array
                    upstream_url:
                      type: string
                      default: ''
                      required: true
                    https_only:
                      type: boolean
                      default: false
                    strip_uri:
                      type: boolean
                      default: false
                    retries:
                      type: number
                      default: 5
                      required: true
                    http_if_terminated:
                      type: boolean
                      default: true
                    preserve_host:
                      type: boolean
                      default: false
                    upstream_connect_timeout:
                      type: number
                      default: 60000
                      required: true
                    upstream_send_timeout:
                      type: number
                      default: 60000
                      required: true
                    upstream_read_timeout:
                      type: number
                      default: 60000
                      required: true
                successUrl: /kong/apis
                submitTo:
                  method:
                    $map: 'params.name?"PUT":"POST"'
                  url: /api/kong/apis
              Component:
                $component: KongForm
    paths:
      - '/kong/api/:name'
      - /kong/api
  APIPluginConfig:
    description: Provides the ability to create or edit a plugin configuration.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: '`${params.name} Settings`'
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: >-
                      params.id?`/api/kong/apis/${params.name}/plugins/${params.id}`:''
                schema:
                  url:
                    $map: '`/api/kong/plugins/schema/${params.pluginName}`'
              props:
                dataRoot: config
                successUrl:
                  $map: '`/kong/api/${params.name}/plugins`'
                submitTo:
                  method:
                    $map: 'params.id?"PUT":"POST"'
                  url:
                    $map: '`/api/kong/apis/${params.name}/plugins`'
                mapper:
                  $mapper:
                    name: params.pluginName
                    config: props
              Component:
                $component: KongForm
    paths:
      - '/kong/api/:name/plugin/:pluginName/:id'
      - '/kong/api/:name/plugin/:pluginName'
  APISelectNewPlugin:
    description: Provides ability to select an API and Plugin to configure to that API.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: '`${params.name} - New Plugin`'
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                schema:
                  url: /api/kong/plugins/enabled
                  mapper:
                    $mapper:
                      fields:
                        pluginType:
                          type: '''string'''
                          enum: props.enabled_plugins
                          required: true
              Component:
                $component: KongForm
              props:
                successUrl:
                  $mapper: '`/kong/api/${params.name}/plugin/${props.pluginType}`'
    path: '/kong/api/:name/plugin'
  Consumers:
    description: Provides a listing of configured consumers.
    $type: HeaderPage
    props:
      title: Kong Consumers
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to: /kong/consumer
      children:
        $type: Provider
        props:
          provide:
            data:
              url: /api/kong/consumers
              root: data
          Component:
            $component: ActionTable
          props:
            actions:
              - caption: Edit
                btnStyle: primary
                link: '/kong/consumer/${id}'
              - caption: Delete
                delete: '/api/kong/consumers/${id}'
                message: 'Are you sure you want to delete "${username||custom_id}"?'
              - caption: Basic Auth
                link: '/kong/consumers/${username||id}/basic-auth-accounts'
              - caption: OAuth2
                link: '/kong/consumers/${username||id}/oauth2-accounts'
              - caption: HMAC
                link: '/kong/consumers/${username||id}/hmac-auth-accounts'
              - caption: Key
                link: '/kong/consumers/${username||id}/key-auth-accounts'
              - caption: JWT
                link: '/kong/consumers/${username||id}/jwt-accounts'
              - caption: ACL's
                link: '/kong/consumers/${username||id}/acl-auth-accounts'
    path: /kong/consumers
    icon: Consumer
    sideNav: true
    caption: Consumers
  Consumer:
    description: Provides the ability to edit the settings for a configured consumer.
    $type: div
    children:
      $type: HeaderPage
      props:
        title: Consumer
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: 'params.id?`/api/kong/consumers/${params.id}`:'''''
              props:
                schema:
                  fields:
                    username:
                      type: string
                    custom_id:
                      type: string
                successUrl: /kong/consumers
                submitTo:
                  method:
                    $map: 'params.id?"PUT":"POST"'
                  url: /api/kong/consumers
              Component:
                $component: KongForm
    paths:
      - '/kong/consumer/:id'
      - /kong/consumer
  ListBasicAuth:
    description: Lists all Basic Auth's associated with a configured consumer.
    $type: HeaderPage
    props:
      title:
        $map: '`${params.consumer} - Basic Auth Accounts`'
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to:
              $mapper: '`/kong/consumer/${params.consumer}/basic-auth`'
      children:
        $type: Provider
        props:
          provide:
            data:
              url:
                $map: '`/api/kong/consumers/${params.consumer}/basic-auth`'
              root: data
              mapper:
                $mapper: |-
                  props.map((ds)=>{
                    return {
                      username: ds.username,
                      created: new Date(ds.created_at),
                      id: ds.id,
                      consumer_id: ds.consumer_id
                    };
                  })
          Component:
            $component: ActionTable
          props:
            actions:
              - link:
                  $mapper: >-
                    `/kong/consumer/${params.consumer}/basic-auth/${props.username}`
                caption: Edit
                btnStyle: primary
              - caption: Delete
                delete: '/api/kong/consumers/${consumer_id}/basic-auth/${id}'
                message: 'Are you sure you want to delete "${username||custom_id}"?'
    path: '/kong/consumers/:consumer/basic-auth-accounts'
  EditBasicAuth:
    description: >-
      Provides the ability to edit the settings for a configured Basic Auth on a
      specific consumer.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: >-
            params.name?`${params.id} - Basic Auth -
            ${params.name}`:`${params.id} - Basic Auth`
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: >-
                      params.name?`/api/kong/consumers/${params.id}/basic-auth/${params.name}`:''
                  mapper:
                    $mapper: >-
                      {username: props.username, id: props.id, consumer_id:
                      props.consumer_id, created_at: props.created_at}
              props:
                schema:
                  fields:
                    username:
                      type: string
                      required: true
                    password:
                      type: string
                      required: true
                successUrl:
                  $map: '`/kong/consumers/${params.id}/basic-auth-accounts`'
                submitTo:
                  method:
                    $map: 'params.name?"PUT":"POST"'
                  url:
                    $map: '`/api/kong/consumers/${params.id}/basic-auth`'
              Component:
                $component: KongForm
    paths:
      - '/kong/consumer/:id/basic-auth/:name'
      - '/kong/consumer/:id/basic-auth'
  ListOAuth2:
    description: Lists all OAuth 2's associated with a configured consumer.
    $type: HeaderPage
    props:
      title:
        $map: '`${params.consumer} - OAuth2 Accounts`'
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to:
              $mapper: '`/kong/consumer/${params.consumer}/oauth2`'
      children:
        $type: Provider
        props:
          provide:
            data:
              url:
                $map: '`/api/kong/consumers/${params.consumer}/oauth2`'
              root: data
              mapper:
                $mapper: |-
                  props.map((ds)=>{
                    return {
                      name: ds.name,
                      created: new Date(ds.created_at),
                      id: ds.id,
                      consumer_id: ds.consumer_id
                    };
                  })
          Component:
            $component: ActionTable
          props:
            actions:
              - link:
                  $mapper: '`/kong/consumer/${params.consumer}/oauth2/${props.id}`'
                caption: Edit
                btnStyle: primary
              - caption: Delete
                delete: '/api/kong/consumers/${consumer_id}/oauth2/${id}'
                message: 'Are you sure you want to delete "${name||custom_id}"?'
    path: '/kong/consumers/:consumer/oauth2-accounts'
  EditOAuth2:
    description: >-
      Provides the ability to edit the settings for a configured OAuth2 on a
      specific consumer.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: 'params.name?`${params.id} - OAuth2`:`${params.id} - OAuth2`'
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: >-
                      params.name?`/api/kong/consumers/${params.id}/oauth2/${params.name}`:''
                  mapper:
                    $mapper: >-
                      {name: props.name, id: props.id, consumer_id:
                      props.consumer_id, created_at: props.created_at,
                      client_id: props.client_id, client_secret:
                      props.client_secret, redirect_uri: props.redirect_uri}
              props:
                schema:
                  fields:
                    name:
                      type: string
                      required: true
                    client_id:
                      type: string
                    client_secret:
                      type: string
                    redirect_uri:
                      type: array
                      required: true
                successUrl:
                  $map: '`/kong/consumers/${params.id}/oauth2-accounts`'
                submitTo:
                  method:
                    $map: 'params.name?"PUT":"POST"'
                  url:
                    $map: '`/api/kong/consumers/${params.id}/oauth2`'
              Component:
                $component: KongForm
    paths:
      - '/kong/consumer/:id/oauth2/:name'
      - '/kong/consumer/:id/oauth2'
  ListHMAC:
    description: Lists all HMAC's associated with a configured consumer.
    $type: HeaderPage
    props:
      title:
        $map: '`${params.consumer} - HMAC Auth Accounts`'
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to:
              $mapper: '`/kong/consumer/${params.consumer}/hmac-auth`'
      children:
        $type: Provider
        props:
          provide:
            data:
              url:
                $map: '`/api/kong/consumers/${params.consumer}/hmac-auth`'
              root: data
              mapper:
                $mapper: |-
                  props.map((ds)=>{
                    return {
                      username: ds.username,
                      created: new Date(ds.created_at),
                      id: ds.id,
                      consumer_id: ds.consumer_id
                    };
                  })
          Component:
            $component: ActionTable
          props:
            actions:
              - link:
                  $mapper: >-
                    `/kong/consumer/${params.consumer}/hmac-auth/${props.username}`
                caption: Edit
                btnStyle: primary
              - caption: Delete
                delete: '/api/kong/consumers/${consumer_id}/hmac-auth/${id}'
                message: 'Are you sure you want to delete "${username||custom_id}"?'
    path: '/kong/consumers/:consumer/hmac-auth-accounts'
  EditHMAC:
    description: >-
      Provides the ability to edit the settings for a configured HMAC on a
      specific consumer.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: >-
            params.name?`${params.id} - HMAC Auth -
            ${params.name}`:`${params.id} - HMAC Auth`
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: >-
                      params.name?`/api/kong/consumers/${params.id}/hmac-auth/${params.name}`:''
                  mapper:
                    $mapper: >-
                      {username: props.username, id: props.id, consumer_id:
                      props.consumer_id, created_at: props.created_at}
              props:
                schema:
                  fields:
                    username:
                      type: string
                      required: true
                    secret:
                      type: string
                      required: true
                successUrl:
                  $map: '`/kong/consumers/${params.id}/hmac-auth-accounts`'
                submitTo:
                  method:
                    $map: 'params.name?"PUT":"POST"'
                  url:
                    $map: '`/api/kong/consumers/${params.id}/hmac-auth`'
              Component:
                $component: KongForm
    paths:
      - '/kong/consumer/:id/hmac-auth/:name'
      - '/kong/consumer/:id/hmac-auth'
  ListKey:
    description: Lists all Key's associated with a configured consumer.
    $type: HeaderPage
    props:
      title:
        $map: '`${params.consumer} - HMAC Auth Accounts`'
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to:
              $mapper: '`/kong/consumer/${params.consumer}/key-auth`'
      children:
        $type: Provider
        props:
          provide:
            data:
              url:
                $map: '`/api/kong/consumers/${params.consumer}/key-auth`'
              root: data
              mapper:
                $mapper: |-
                  props.map((ds)=>{
                    return {
                      key: ds.key,
                      created: new Date(ds.created_at),
                      id: ds.id,
                      consumer_id: ds.consumer_id
                    };
                  })
          Component:
            $component: ActionTable
          props:
            actions:
              - link:
                  $mapper: '`/kong/consumer/${params.consumer}/key-auth/${props.id}`'
                caption: Edit
                btnStyle: primary
              - caption: Delete
                delete: '/api/kong/consumers/${consumer_id}/key-auth/${id}'
                message: 'Are you sure you want to delete "${key||custom_id}"?'
    path: '/kong/consumers/:consumer/key-auth-accounts'
  EditKey:
    description: >-
      Provides the ability to edit the settings for a configured Key on a
      specific consumer.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: >-
            params.name?`${params.id} - Key Auth - ${params.name}`:`${params.id}
            - Key Auth`
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: >-
                      params.name?`/api/kong/consumers/${params.id}/key-auth/${params.name}`:''
                  mapper:
                    $mapper: >-
                      {key: props.key, id: props.id, consumer_id:
                      props.consumer_id, created_at: props.created_at}
              props:
                schema:
                  fields:
                    key:
                      type: string
                successUrl:
                  $map: '`/kong/consumers/${params.id}/key-auth-accounts`'
                submitTo:
                  method:
                    $map: 'params.name?"PUT":"POST"'
                  url:
                    $map: '`/api/kong/consumers/${params.id}/key-auth`'
              Component:
                $component: KongForm
    paths:
      - '/kong/consumer/:id/key-auth/:name'
      - '/kong/consumer/:id/key-auth'
  ListJWT:
    description: Lists all JWT's associated with a configured consumer.
    $type: HeaderPage
    props:
      title:
        $map: '`${params.consumer} - JWT Auth Accounts`'
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to:
              $mapper: '`/kong/consumer/${params.consumer}/jwt`'
      children:
        $type: Provider
        props:
          provide:
            data:
              url:
                $map: '`/api/kong/consumers/${params.consumer}/jwt`'
              root: data
              mapper:
                $mapper: |-
                  props.map((ds)=>{
                    return {
                      key: ds.key,
                      created: new Date(ds.created_at),
                      id: ds.id,
                      consumer_id: ds.consumer_id
                    };
                  })
          Component:
            $component: ActionTable
          props:
            actions:
              - link:
                  $mapper: '`/kong/consumer/${params.consumer}/jwt/${props.key}`'
                caption: Edit
                btnStyle: primary
              - caption: Delete
                delete: '/api/kong/consumers/${consumer_id}/jwt/${id}'
                message: 'Are you sure you want to delete "${key||id}"?'
    path: '/kong/consumers/:consumer/jwt-accounts'
  EditJWT:
    description: >-
      Provides the ability to edit the settings for a configured JWT on a
      specific consumer.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: >-
            params.name?`${params.id} - JWT Auth - ${params.name}`:`${params.id}
            - JWT Auth`
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: >-
                      params.name?`/api/kong/consumers/${params.id}/jwt/${params.name}`:''
                  mapper:
                    $mapper: >-
                      {key: props.key, id: props.id, consumer_id:
                      props.consumer_id, created_at: props.created_at}
              props:
                schema:
                  fields:
                    key:
                      type: string
                      required: true
                    secret:
                      type: string
                      required: true
                successUrl:
                  $map: '`/kong/consumers/${params.id}/jwt-accounts`'
                submitTo:
                  method:
                    $map: 'params.name?"PUT":"POST"'
                  url:
                    $map: '`/api/kong/consumers/${params.id}/jwt`'
              Component:
                $component: KongForm
    paths:
      - '/kong/consumer/:id/jwt/:name'
      - '/kong/consumer/:id/jwt'
  ListACL:
    description: Lists all ACL's associated with a configured consumer.
    $type: HeaderPage
    props:
      title:
        $map: '`${params.consumer} - ACL''s`'
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to:
              $mapper: '`/kong/consumer/${params.consumer}/acl-auth`'
      children:
        $type: Provider
        props:
          provide:
            data:
              url:
                $map: '`/api/kong/consumers/${params.consumer}/acls`'
              root: data
              mapper:
                $mapper: |-
                  props.map((ds)=>{
                    return {
                      group: ds.group,
                      created: new Date(ds.created_at),
                      id: ds.id,
                      consumer_id: ds.consumer_id
                    };
                  })
          Component:
            $component: ActionTable
          props:
            actions:
              - caption: Delete
                delete: '/api/kong/consumers/${consumer_id}/acls/${id}'
                message: 'Are you sure you want to delete "${group||id}"?'
    path: '/kong/consumers/:consumer/acl-auth-accounts'
  EditACL:
    description: >-
      Provides the ability to edit the settings for a configured ACL on a
      specific consumer.
    $type: div
    children:
      $type: HeaderPage
      props:
        title:
          $map: 'params.name?`${params.id} - ACL''s`:`${params.id} - ACL''s`'
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: >-
                      params.name?`/api/kong/consumers/${params.id}/acls/${params.name}`:''
                  mapper:
                    $mapper: >-
                      {group: props.group, id: props.id, consumer_id:
                      props.consumer_id, created_at: props.created_at}
              props:
                schema:
                  fields:
                    group:
                      type: string
                successUrl:
                  $map: '`/kong/consumers/${params.id}/acl-auth-accounts`'
                submitTo:
                  method:
                    $map: 'params.name?"PUT":"POST"'
                  url:
                    $map: '`/api/kong/consumers/${params.id}/acls`'
              Component:
                $component: KongForm
    paths:
      - '/kong/consumer/:id/acl-auth/:name'
      - '/kong/consumer/:id/acl-auth'
  Certificates:
    description: Provides a listing of available certificates.
    $type: HeaderPage
    props:
      title: Kong Certificates
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to: /kong/certificate
      children:
        $type: Provider
        props:
          provide:
            data:
              url: /api/kong/certificates
              root: data
          Component:
            $component: ActionTable
          props:
            actions:
              - caption: Edit
                btnStyle: primary
                link: '/kong/certificate/${id}'
              - caption: Delete
                delete: '/api/kong/certificates/${id}'
                message: 'Are you sure you want to delete "${cert}"?'
    path: /kong/certificates
    icon: Certificate
    sideNav: true
    caption: Certificates
  Certificate:
    description: Provides the ability to edit the settings for a configured certificate.
    $type: div
    children:
      $type: HeaderPage
      props:
        title: Certificate
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: 'params.id?`/api/kong/certificates/${params.id}`:'''''
              props:
                schema:
                  fields:
                    cert:
                      type: string
                      required: true
                    key:
                      type: string
                      required: true
                successUrl: /kong/certificates
                submitTo:
                  method:
                    $map: 'params.id?"PUT":"POST"'
                  url: /api/kong/certificates
              Component:
                $component: KongForm
    paths:
      - '/kong/certificate/:id'
      - /kong/certificate
  SNIs:
    description: provides a listing of all configured SNI's.
    $type: HeaderPage
    props:
      title: Kong SNI
    children:
      $type: Panel
      props:
        footer:
          $type: Link
          props:
            caption: New
            className: btn btn-primary
            to: /kong/sni
      children:
        $type: Provider
        props:
          provide:
            data:
              url: /api/kong/snis
              root: data
          Component:
            $component: ActionTable
          props:
            actions:
              - caption: Edit
                btnStyle: primary
                link: '/kong/sni/${name}'
              - caption: Delete
                delete: '/api/kong/snis/${name}'
                message: 'Are you sure you want to delete "${name}"?'
    path: /kong/snis
    icon: SNI
    sideNav: true
    caption: SNI
  SNI:
    description: Provides the ability to edit the configuration for a given SNI.
    $type: div
    children:
      $type: HeaderPage
      props:
        title: Certificate
      children:
        - $type: Panel
          props:
            inset: true
          children:
            $type: Provider
            props:
              provide:
                data:
                  url:
                    $map: 'params.name?`/api/kong/snis/${params.name}`:'''''
                schema:
                  url: /api/kong/certificates
                  mapper:
                    $mapper:
                      type: '''object'''
                      required:
                        - '''name'''
                      properties:
                        name:
                          type: '''string'''
                          title: '''Name'''
                        ssl_certificate_id:
                          type: '''string'''
                          title: '''Certificate'''
                          enum: props.map(p=>p.id)
                          enumNames: props.map(p=>p.cert)
              props:
                successUrl: /kong/snis
                submitTo:
                  method:
                    $map: 'params.name?"PUT":"POST"'
                  url: /api/kong/snis
              Component:
                $component: Form
    paths:
      - '/kong/sni/:name'
      - /kong/sni
